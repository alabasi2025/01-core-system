# ๐ ุฎุทุฉ ุจูุงุก ุงููุธุงู ุงูุฃู - ูุฑุงุญู ูุงููุฉ ูุฏูููุฉ

> **ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 18 ุฏูุณูุจุฑ 2025
> **ุงููุตุฏุฑ:** ููู 01_ุงููุธุงู_ุงูุฃู.md (6,407 ุณุทุฑ)

---

## ๐ ููุฎุต ุงููุชุทูุจุงุช

ุจูุงุกู ุนูู ุชุญููู ููู ุงููุธุงู ุงูุฃูุ ูุชููู ุงููุธุงู ูู **16 ูุญุฏุฉ ุฑุฆูุณูุฉ** ุชุญุชุงุฌ ุฅูู ุจูุงุก:

| ุงููุญุฏุฉ | ุงูุญุงูุฉ ุงูุญุงููุฉ | ุงูุฃููููุฉ |
|--------|---------------|----------|
| 1. ุงููููู ุงูุชูุธููู | โ ููุชูู ุฌุฒุฆูุงู | ุนุงููุฉ |
| 2. ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช | โ ููุชูู ุฌุฒุฆูุงู | ุนุงููุฉ |
| 3. ุงููุธุงู ุงููุงูู ุงูุฃุณุงุณู | โ ููุชูู ุฌุฒุฆูุงู | ุนุงููุฉ |
| 4. ุงููุธุงู ุงููุงูู ุงููุชูุฏู | โ ุบูุฑ ูุจุฏูุก | ุนุงููุฉ |
| 5. ูุฑูุฒ ุงูุชุณููุฉ ุงููุฑู | โ ุบูุฑ ูุจุฏูุก | ุนุงููุฉ |
| 6. ุฅุฏุงุฑุฉ ุตูุฏูู ุงูุชุญุตูู | โ ุบูุฑ ูุจุฏูุก | ูุชูุณุทุฉ |
| 7. ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ | โ ุบูุฑ ูุจุฏูุก | ูุชูุณุทุฉ |
| 8. ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ุงูููุตูุฉ (40+ ุญุณุงุจ) | โณ ุฌุฒุฆู | ุนุงููุฉ |
| 9. ุงููููุฏ ุงููุญุงุณุจูุฉ ุงููุฌููุฉ | โ ุบูุฑ ูุจุฏูุก | ุนุงููุฉ |
| 10. ูุชุงููุฌ ุงูุฎุฏูุงุช ูุงูุชุณุนูุฑ | โ ุบูุฑ ูุจุฏูุก | ูุชูุณุทุฉ |
| 11. ูุธุงู ุฃูุงูุฑ ุงูุฏูุน ุงููุฑูุฒู | โ ุบูุฑ ูุจุฏูุก | ุนุงููุฉ |
| 12. ูุธุงู ุงูุนูุฏ ุงููุงููุฉ | โ ุบูุฑ ูุจุฏูุก | ูุชูุณุทุฉ |
| 13. ุงููููุฏ ุงูุงูุชุชุงุญูุฉ | โ ุบูุฑ ูุจุฏูุก | ุนุงููุฉ |
| 14. ุฅุฏุงุฑุฉ ุงููุฌููุนุฉ ูุชุนุฏุฏุฉ ุงููุณุชููุงุช | โณ ุฌุฒุฆู | ุนุงููุฉ |
| 15. ุชุฑุญูู ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ | โ ุบูุฑ ูุจุฏูุก | ูุชูุณุทุฉ |
| 16. ุงูุชูุงูู ูุน ูุธุงู ุงููุทูุฑ | โ ุบูุฑ ูุจุฏูุก | ููุฎูุถุฉ |

---

# ๐ ุงููุฑุงุญู ุงูุชูุตูููุฉ

---

## ุงููุฑุญูุฉ 1: ุงุณุชููุงู ุงูุฃุณุงุณูุงุช (ุงูุฃุณุจูุน 1-2)

### 1.1 ุงุณุชููุงู ุงููููู ุงูุชูุธููู

#### Backend (NestJS)
- [ ] ุฅุถุงูุฉ ุญููู ุฅุถุงููุฉ ูููุญุทุงุช (coordinates, contact_info)
- [ ] ุฅุถุงูุฉ ุฌุฏูู ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ (core_settings)
- [ ] API ููุฅุนุฏุงุฏุงุช (GET, PUT)

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ุฅุนุฏุงุฏุงุช ุงููุฌููุนุฉ
- [ ] ุดุงุดุฉ ุชูุงุตูู ุงููุญุทุฉ ูุน ุงูุฎุฑูุทุฉ
- [ ] ุดุงุดุฉ ุฅุญุตุงุฆูุงุช ุงููุญุทุฉ

#### ุงูุฌุฏุงูู ุงููุทููุจุฉ:
```sql
core_settings (
    id UUID PRIMARY KEY,
    business_id UUID,
    key VARCHAR(100),
    value TEXT,
    type VARCHAR(20), -- 'string', 'number', 'boolean', 'json'
    category VARCHAR(50),
    created_at, updated_at
)
```

---

### 1.2 ุงุณุชููุงู ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช (RBAC)

#### Backend (NestJS)
- [ ] ุฅุถุงูุฉ ุตูุงุญูุงุช ุชูุตูููุฉ (60+ ุตูุงุญูุฉ)
- [ ] Guard ููุชุญูู ูู ุงูุตูุงุญูุงุช ุนูู ูุณุชูู ุงูุญููู
- [ ] API ูุชุนููู ุตูุงุญูุงุช ูุชุนุฏุฏุฉ ุฏูุนุฉ ูุงุญุฏุฉ
- [ ] API ููุณุฎ ุตูุงุญูุงุช ุฏูุฑ ูุฏูุฑ ุขุฎุฑ

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุน PrimeNG TreeTable
- [ ] ุดุงุดุฉ ุชุนููู ุงูุตูุงุญูุงุช (ูุตูููุฉ ุชูุงุนููุฉ)
- [ ] ุดุงุดุฉ ุณุฌู ูุดุงุท ุงููุณุชุฎุฏููู

#### ุงูุตูุงุญูุงุช ุงููุทููุจุฉ (60+):
```
users.view, users.create, users.edit, users.delete, users.assign_roles
roles.view, roles.create, roles.edit, roles.delete, roles.assign_permissions
stations.view, stations.create, stations.edit, stations.delete
accounts.view, accounts.create, accounts.edit, accounts.delete
journal_entries.view, journal_entries.create, journal_entries.post, journal_entries.void
reports.trial_balance, reports.income_statement, reports.balance_sheet
reconciliation.view, reconciliation.create, reconciliation.approve
payment_orders.view, payment_orders.create, payment_orders.approve, payment_orders.pay
custodies.view, custodies.create, custodies.approve, custodies.settle
...
```

---

### 1.3 ุงุณุชููุงู ุงููุธุงู ุงููุงูู ุงูุฃุณุงุณู

#### Backend (NestJS)
- [ ] ุฅุถุงูุฉ ุญูู `level` ููุญุณุงุจุงุช (ุชููุงุฆู)
- [ ] ุฅุถุงูุฉ ุญูู `full_code` ููุญุณุงุจุงุช (ูุซู: 1000.1001.1002)
- [ ] API ูุญุณุงุจ ุงูุฑุตูุฏ ุงูุญุงูู ููู ุญุณุงุจ
- [ ] API ูููุฒุงู ุงููุฑุงุฌุนุฉ
- [ ] API ููุดู ุญุณุงุจ

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ุดุฌุฑุฉ ุงูุญุณุงุจุงุช (PrimeNG Tree)
- [ ] ุดุงุดุฉ ุฅุถุงูุฉ ุญุณุงุจ ูุฑุนู
- [ ] ุดุงุดุฉ ููุฒุงู ุงููุฑุงุฌุนุฉ
- [ ] ุดุงุดุฉ ูุดู ุญุณุงุจ
- [ ] ุดุงุดุฉ ุชูุงุตูู ุงูููุฏ ุงููููู

#### ุงูุฌุฏุงูู ุงููุทููุจุฉ:
```sql
-- ุชุญุฏูุซ ุฌุฏูู ุงูุญุณุงุจุงุช
ALTER TABLE core_accounts ADD COLUMN level INT DEFAULT 1;
ALTER TABLE core_accounts ADD COLUMN full_code VARCHAR(50);
ALTER TABLE core_accounts ADD COLUMN opening_balance DECIMAL(15,2) DEFAULT 0;
ALTER TABLE core_accounts ADD COLUMN current_balance DECIMAL(15,2) DEFAULT 0;
```

---

## ุงููุฑุญูุฉ 2: ุงููุธุงู ุงููุงูู ุงููุชูุฏู (ุงูุฃุณุจูุน 3-4)

### 2.1 ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ุงูููุตูุฉ (40+ ุญุณุงุจ)

#### ุงูุญุณุงุจุงุช ุงููุทููุจุฉ:

**ุงูุฃุตูู (1000-1700):**
```
1000 - ุงูููุฏูุฉ ูุงูุจููู
  1001 - ุงูููุฏูุฉ ุจุงูุตูุฏูู
  1002 - ุญุณุงุจ ุงูุจูู A
  1003 - ุญุณุงุจ ุงูุจูู B
  1004 - ุญุณุงุจุงุช ุฃุฎุฑู

1100 - ุงูุนููุงุก (ุงูุฐูู ุงููุฏููุฉ)
  1101 - ุงูุนููุงุก (ุนุฏุงุฏุงุช ุชูููุฏูุฉ)
  1102 - ุงูุนููุงุก (ุนุฏุงุฏุงุช STS)
  1103 - ุงูุนููุงุก (ุตูุฏูู ุงูุฏุนู)

1200 - ุงููุฎุฒูู
  1201 - ุนุฏุงุฏุงุช ุฌุฏูุฏุฉ
  1202 - ุดุงุดุงุช STS ุฌุฏูุฏุฉ
  1203 - ุฃุฎุชุงู ุฌุฏูุฏุฉ
  1204 - ููุงุทุน ุฌุฏูุฏุฉ
  1205 - ุฃุณูุงู ูููุงุฏ

1300 - ุงูุชุฃูููุงุช ูุงููุฏุงุฆุน
  1301 - ุชุฃูููุงุช ูุฏู ุงูููุฑุฏูู
  1302 - ูุฏุงุฆุน ุจูููุฉ

1400 - ุงูุฃุตูู ุงูุซุงุจุชุฉ
  1401 - ุงููุจุงูู
  1402 - ุงูุณูุงุฑุงุช
  1403 - ุงูุฃุซุงุซ ูุงููุนุฏุงุช
  1404 - ุฃุฌูุฒุฉ ุงูุญุงุณูุจ
  1405 - ูุฌูุน ุงูุฅููุงู (ุณุงูุจ)

1700 - ุงูุนูุฏ ูุงูุณูู
  1701 - ุนูุฏ ุงูููุธููู
  1702 - ุณูู ุงูููุธููู
```

**ุงูุฎุตูู (2000-2400):**
```
2000 - ุงูููุฑุฏูู (ุงูุฐูู ุงูุฏุงุฆูุฉ)
  2001 - ููุฑุฏูู ูุญูููู
  2002 - ููุฑุฏูู ุฎุงุฑุฌููู

2100 - ุชุฃูููุงุช ูู ุงูุนููุงุก
  2101 - ุชุฃูููุงุช ุนุฏุงุฏุงุช ุชูููุฏูุฉ
  2102 - ุชุฃูููุงุช ุนุฏุงุฏุงุช STS

2200 - ุงูุฅูุฑุงุฏุงุช ุงููุคุฌูุฉ
  2201 - ุฅูุฑุงุฏุงุช ูุคุฌูุฉ (ุฏูุน ูุณุจู)
  2202 - ุฅูุฑุงุฏุงุช ูุคุฌูุฉ (ุฏุนู ุญูููู)

2300 - ุญุณุงุจุงุช ูุณูุทุฉ (Clearing Accounts)
  2301 - ูุณูุท ุตูุฏูู ุงูุชุญุตูู
  2302 - ูุณูุท ุจูู A
  2303 - ูุณูุท ุจูู B
  2304 - ูุณูุท ุฅูุฑุงุฏุงุช ุงูููุชุฑุฉ
  2305 - ูุณูุท ุฅูุฑุงุฏุงุช ุงูุฏูุน ุงููุณุจู
  2306 - ูุณูุท ุตูุฏูู ุงูุฏุนู

2400 - ูุณุชุญูุงุช ุงูููุธููู
  2401 - ุฑูุงุชุจ ูุณุชุญูุฉ
  2402 - ุญูุงูุฒ ูุณุชุญูุฉ
```

**ุงูุฅูุฑุงุฏุงุช (4000-4200):**
```
4000 - ุฅูุฑุงุฏุงุช ุงูููุฑุจุงุก
  4001 - ุฅูุฑุงุฏุงุช ููุฑุจุงุก (ุนุฏุงุฏุงุช ุชูููุฏูุฉ)
  4002 - ุฅูุฑุงุฏุงุช ููุฑุจุงุก (ุฏูุน ูุณุจู)
  4003 - ุฅูุฑุงุฏุงุช ููุฑุจุงุก (ุฏุนู ุญูููู)

4100 - ุฅูุฑุงุฏุงุช ุงูุงุดุชุฑุงูุงุช
  4101 - ุฑุณูู ุงูุงุดุชุฑุงู (ุนุฏุงุฏุงุช ุชูููุฏูุฉ)
  4102 - ุฑุณูู ุงูุงุดุชุฑุงู (ุนุฏุงุฏุงุช STS)

4200 - ุฅูุฑุงุฏุงุช ุฃุฎุฑู
  4201 - ุฅูุฑุงุฏุงุช ุจูุน ุนุฏุงุฏุงุช
  4202 - ุฅูุฑุงุฏุงุช ุฑุณูู ุชุฑููุฉ
  4203 - ุฅูุฑุงุฏุงุช ุฑุณูู ุงุณุชุจุฏุงู
```

**ุงููุตุฑููุงุช (5000-5500):**
```
5000 - ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ
  5001 - ุชูููุฉ ุงูุนุฏุงุฏุงุช ุงููุจุงุนุฉ
  5002 - ุชูููุฉ ุงูููููุงุช ุงููุณุชุฎุฏูุฉ

5100 - ูุตุฑููุงุช ุงูุตูุงูุฉ ูุงูุชุดุบูู
  5101 - ูุตุฑููุงุช ุตูุงูุฉ ุงูุนุฏุงุฏุงุช
  5102 - ูุตุฑููุงุช ุงุณุชุจุฏุงู ุงูููููุงุช

5200 - ูุตุฑููุงุช ุฃุฎุฑู
  5201 - ูุตุฑููุงุช ุฅุฏุงุฑูุฉ
  5202 - ูุตุฑููุงุช ุชุณููู

5300 - ูุตุฑููุงุช ุงูุฑูุงุชุจ
  5301 - ุฑูุงุชุจ ุงูููุธููู
  5302 - ุญูุงูุฒ ุงูููุธููู
  5303 - ูุตุฑููุงุช ุงูุนูุงูุฉ ุงูููุฏุงููุฉ

5400 - ูุตุฑููุงุช ุงูุฅููุงู
  5401 - ุฅููุงู ุงููุจุงูู
  5402 - ุฅููุงู ุงูุณูุงุฑุงุช
  5403 - ุฅููุงู ุงูุฃุซุงุซ ูุงููุนุฏุงุช

5500 - ูุตุฑููุงุช ุงูุชุดุบูู
  5501 - ุฅูุฌุงุฑุงุช
  5502 - ููุฑุจุงุก ูููุงู
  5503 - ุงุชุตุงูุงุช
```

---

### 2.2 ุงูุญุณุงุจุงุช ุงููุณูุทุฉ (Clearing Accounts)

#### Backend (NestJS)
- [ ] ุฅูุดุงุก ูุญุฏุฉ clearing-accounts
- [ ] ุฌุฏูู core_clearing_accounts
- [ ] ุฌุฏูู core_clearing_transactions
- [ ] API ูุฅุถุงูุฉ ุญุฑูุฉ ููุญุณุงุจ ุงููุณูุท
- [ ] API ูุนุฑุถ ุงูุญุฑูุงุช ุบูุฑ ุงููุณูุงุฉ

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ูุงุฆูุฉ ุงูุญุณุงุจุงุช ุงููุณูุทุฉ
- [ ] ุดุงุดุฉ ุญุฑูุงุช ุงูุญุณุงุจ ุงููุณูุท
- [ ] ุดุงุดุฉ ุฅุถุงูุฉ ุญุฑูุฉ ูุฏููุฉ

#### ุงูุฌุฏุงูู ุงููุทููุจุฉ:
```sql
core_clearing_accounts (
    id UUID PRIMARY KEY,
    business_id UUID NOT NULL,
    account_id UUID REFERENCES core_accounts(id),
    name VARCHAR(100) NOT NULL,
    name_ar VARCHAR(100),
    description TEXT,
    source_system VARCHAR(50), -- 'billing', 'prepaid', 'collection', 'bank'
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW()
)

core_clearing_transactions (
    id UUID PRIMARY KEY,
    clearing_account_id UUID REFERENCES core_clearing_accounts(id),
    transaction_date DATE NOT NULL,
    amount DECIMAL(15,2) NOT NULL,
    direction VARCHAR(10) NOT NULL, -- 'debit', 'credit'
    reference_type VARCHAR(50),
    reference_id UUID,
    reference_number VARCHAR(100),
    description TEXT,
    is_reconciled BOOLEAN DEFAULT false,
    reconciliation_id UUID,
    reconciled_at TIMESTAMP,
    created_by UUID,
    created_at TIMESTAMP DEFAULT NOW()
)
```

---

### 2.3 ุงูุชูุงุฑูุฑ ุงููุงููุฉ

#### Backend (NestJS)
- [ ] API ููุฒุงู ุงููุฑุงุฌุนุฉ (Trial Balance)
- [ ] API ูุงุฆูุฉ ุงูุฏุฎู (Income Statement)
- [ ] API ุงูููุฒุงููุฉ ุงูุนููููุฉ (Balance Sheet)
- [ ] API ูุดู ุญุณุงุจ (Account Statement)
- [ ] API ุชูุฑูุฑ ุงูููุงุฑูุฉ ุงูุดูุฑูุฉ

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ููุฒุงู ุงููุฑุงุฌุนุฉ (ูุน ุชุตุฏูุฑ Excel/PDF)
- [ ] ุดุงุดุฉ ูุงุฆูุฉ ุงูุฏุฎู
- [ ] ุดุงุดุฉ ุงูููุฒุงููุฉ ุงูุนููููุฉ
- [ ] ุดุงุดุฉ ูุดู ุญุณุงุจ (ูุน ููุชุฑุฉ ุจุงูุชุงุฑูุฎ)
- [ ] ุดุงุดุฉ ุชูุฑูุฑ ุงูููุงุฑูุฉ

---

## ุงููุฑุญูุฉ 3: ูุฑูุฒ ุงูุชุณููุฉ ุงููุฑู (ุงูุฃุณุจูุน 5-6)

### 3.1 ูุญุฑู ุงูุชุณููุฉ

#### Backend (NestJS)
- [ ] ุฅูุดุงุก ูุญุฏุฉ reconciliation
- [ ] ุฌุฏูู core_reconciliation_sessions
- [ ] ุฌุฏูู core_reconciliation_items
- [ ] ุฌุฏูู core_reconciliation_rules
- [ ] API ูุฅูุดุงุก ุฌูุณุฉ ุชุณููุฉ
- [ ] API ูููุทุงุจูุฉ ุงูุชููุงุฆูุฉ
- [ ] API ูููุทุงุจูุฉ ุงููุฏููุฉ
- [ ] API ูุฅุชูุงู ุงูุชุณููุฉ

#### ุงูุฌุฏุงูู ุงููุทููุจุฉ:
```sql
core_reconciliation_sessions (
    id UUID PRIMARY KEY,
    business_id UUID NOT NULL,
    session_number VARCHAR(20) UNIQUE,
    session_date DATE NOT NULL,
    clearing_account_id UUID,
    status VARCHAR(20) DEFAULT 'draft', -- 'draft', 'in_progress', 'completed'
    total_items INT DEFAULT 0,
    matched_items INT DEFAULT 0,
    unmatched_items INT DEFAULT 0,
    total_amount DECIMAL(15,2) DEFAULT 0,
    matched_amount DECIMAL(15,2) DEFAULT 0,
    difference DECIMAL(15,2) DEFAULT 0,
    created_by UUID,
    completed_by UUID,
    completed_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT NOW()
)

core_reconciliation_items (
    id UUID PRIMARY KEY,
    session_id UUID REFERENCES core_reconciliation_sessions(id),
    source_type VARCHAR(50), -- 'clearing', 'bank', 'invoice', 'payment'
    source_id UUID,
    amount DECIMAL(15,2) NOT NULL,
    direction VARCHAR(10), -- 'debit', 'credit'
    reference_number VARCHAR(100),
    transaction_date DATE,
    description TEXT,
    is_matched BOOLEAN DEFAULT false,
    matched_with_id UUID,
    match_type VARCHAR(20), -- 'auto', 'manual', 'partial'
    created_at TIMESTAMP DEFAULT NOW()
)

core_reconciliation_rules (
    id UUID PRIMARY KEY,
    business_id UUID NOT NULL,
    name VARCHAR(100),
    description TEXT,
    source_account_id UUID,
    target_account_id UUID,
    match_criteria JSONB, -- {"field": "reference", "operator": "equals"}
    tolerance_amount DECIMAL(15,2) DEFAULT 0,
    tolerance_days INT DEFAULT 0,
    is_active BOOLEAN DEFAULT true,
    priority INT DEFAULT 0,
    created_at TIMESTAMP DEFAULT NOW()
)
```

### 3.2 ูุงุฌูุฉ ุงูุชุณููุฉ ูุชุนุฏุฏุฉ ุงูุฃููุงุญ

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ูุฑูุฒ ุงูุชุณููุฉ ุงูุฑุฆูุณูุฉ
- [ ] ูููู ุงูููุญ (Panel Component) ูุงุจู ููุชุฎุตูุต
- [ ] ูููู ุณูุฉ ุงูุชุณููุฉ (Reconciliation Basket)
- [ ] ุดุงุดุฉ ุฅุนุฏุงุฏุงุช ููุงุนุฏ ุงููุทุงุจูุฉ
- [ ] ุดุงุดุฉ ุชูุฑูุฑ ุงูุชุณููุงุช

---

## ุงููุฑุญูุฉ 4: ูุธุงู ุฃูุงูุฑ ุงูุฏูุน (ุงูุฃุณุจูุน 7-8)

### 4.1 ุฃูุงูุฑ ุงูุฏูุน ุงููุฑูุฒู

#### Backend (NestJS)
- [ ] ุฅูุดุงุก ูุญุฏุฉ payment-orders
- [ ] ุฌุฏูู core_payment_orders
- [ ] API ูุฅูุดุงุก ุฃูุฑ ุฏูุน
- [ ] API ูุงุนุชูุงุฏ ุฃูุฑ ุงูุฏูุน
- [ ] API ูุตุฑู ุฃูุฑ ุงูุฏูุน
- [ ] API ูุฅูุบุงุก ุฃูุฑ ุงูุฏูุน
- [ ] Trigger ูุฅูุดุงุก ุงูููุฏ ุงููุญุงุณุจู ุนูุฏ ุงูุตุฑู

#### ุงูุฌุฏุงูู ุงููุทููุจุฉ:
```sql
core_payment_orders (
    id UUID PRIMARY KEY,
    business_id UUID NOT NULL,
    station_id UUID,
    payment_order_number VARCHAR(20) UNIQUE NOT NULL,
    
    -- ูุตุฏุฑ ุฃูุฑ ุงูุฏูุน
    source_system VARCHAR(30) NOT NULL, -- 'field_operations', 'inventory', 'hr', 'customers', 'manual'
    source_type VARCHAR(30) NOT NULL, -- 'work_package', 'supplier_invoice', 'salary', 'incentive', 'deposit_refund'
    source_id UUID,
    source_reference VARCHAR(50),
    
    -- ุงููุณุชููุฏ
    beneficiary_type VARCHAR(20) NOT NULL, -- 'employee', 'team', 'contractor', 'supplier', 'customer'
    beneficiary_id UUID,
    beneficiary_name VARCHAR(100) NOT NULL,
    beneficiary_account VARCHAR(50),
    
    -- ุงููุจูุบ
    amount DECIMAL(15,2) NOT NULL,
    currency VARCHAR(3) DEFAULT 'YER',
    description TEXT,
    
    -- ุงูุญุงูุฉ
    status VARCHAR(20) DEFAULT 'pending', -- 'pending', 'approved', 'paid', 'cancelled'
    
    -- ุงูููุงููุงุช
    created_by UUID,
    approved_by UUID,
    approved_at TIMESTAMP,
    
    -- ุงูุตุฑู
    paid_by UUID,
    paid_at TIMESTAMP,
    payment_method VARCHAR(20), -- 'cash', 'bank_transfer', 'check'
    payment_reference VARCHAR(100),
    
    -- ุงูููุฏ ุงููุญุงุณุจู
    journal_entry_id UUID,
    
    notes TEXT,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
)
```

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ูุงุฆูุฉ ุฃูุงูุฑ ุงูุฏูุน
- [ ] ุดุงุดุฉ ุฅูุดุงุก ุฃูุฑ ุฏูุน
- [ ] ุดุงุดุฉ ุงุนุชูุงุฏ ุฃูุฑ ุงูุฏูุน
- [ ] ุดุงุดุฉ ุตุฑู ุฃูุฑ ุงูุฏูุน
- [ ] ุดุงุดุฉ ุชูุงุตูู ุฃูุฑ ุงูุฏูุน

---

### 4.2 ูุธุงู ุงูุนูุฏ ุงููุงููุฉ

#### Backend (NestJS)
- [ ] ุฅูุดุงุก ูุญุฏุฉ financial-custodies
- [ ] ุฌุฏูู core_financial_custodies
- [ ] ุฌุฏูู core_custody_settlement_documents
- [ ] API ูุทูุจ ุนูุฏุฉ
- [ ] API ูุงุนุชูุงุฏ ุงูุนูุฏุฉ
- [ ] API ูุตุฑู ุงูุนูุฏุฉ
- [ ] API ูุชุตููุฉ ุงูุนูุฏุฉ
- [ ] Triggers ูููููุฏ ุงููุญุงุณุจูุฉ

#### ุงูุฌุฏุงูู ุงููุทููุจุฉ:
```sql
core_financial_custodies (
    id UUID PRIMARY KEY,
    business_id UUID NOT NULL,
    custody_number VARCHAR(20) UNIQUE NOT NULL,
    custody_type VARCHAR(30) NOT NULL, -- 'travel', 'petty_cash', 'purchase', 'project', 'salary_advance'
    
    employee_id UUID NOT NULL,
    employee_name VARCHAR(200),
    department_id UUID,
    
    requested_amount DECIMAL(15,2) NOT NULL,
    approved_amount DECIMAL(15,2),
    currency VARCHAR(3) DEFAULT 'YER',
    
    spent_amount DECIMAL(15,2) DEFAULT 0,
    returned_amount DECIMAL(15,2) DEFAULT 0,
    deducted_amount DECIMAL(15,2) DEFAULT 0,
    
    request_date DATE NOT NULL DEFAULT CURRENT_DATE,
    due_date DATE,
    
    status VARCHAR(20) DEFAULT 'pending', -- 'pending', 'approved', 'disbursed', 'settlement_pending', 'settled', 'cancelled'
    
    created_by UUID,
    approved_by UUID,
    approved_at TIMESTAMP,
    disbursed_by UUID,
    disbursed_at TIMESTAMP,
    settled_by UUID,
    settled_at TIMESTAMP,
    
    disbursement_journal_entry_id UUID,
    settlement_journal_entry_id UUID,
    
    notes TEXT,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
)

core_custody_settlement_documents (
    id UUID PRIMARY KEY,
    custody_id UUID REFERENCES core_financial_custodies(id),
    document_type VARCHAR(30), -- 'invoice', 'receipt', 'voucher'
    document_number VARCHAR(50),
    document_date DATE,
    vendor_name VARCHAR(200),
    amount DECIMAL(15,2) NOT NULL,
    description TEXT,
    attachment_url TEXT,
    created_at TIMESTAMP DEFAULT NOW()
)
```

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ูุงุฆูุฉ ุงูุนูุฏ ุงููุงููุฉ
- [ ] ุดุงุดุฉ ุทูุจ ุนูุฏุฉ ุฌุฏูุฏุฉ
- [ ] ุดุงุดุฉ ุงุนุชูุงุฏ ุงูุนูุฏุฉ
- [ ] ุดุงุดุฉ ุชุตููุฉ ุงูุนูุฏุฉ (ูุน ุฑูุน ุงููุณุชูุฏุงุช)
- [ ] ุชูุฑูุฑ ุงูุนูุฏ ุงูููุชูุญุฉ

---

## ุงููุฑุญูุฉ 5: ุงููููุฏ ุงูุงูุชุชุงุญูุฉ ูุงูุชุฑุญูู (ุงูุฃุณุจูุน 9-10)

### 5.1 ุงููููุฏ ุงูุงูุชุชุงุญูุฉ

#### Backend (NestJS)
- [ ] ุฅูุดุงุก ูุญุฏุฉ opening-balances
- [ ] ุฌุฏูู core_opening_balances
- [ ] API ูุฅุฏุฎุงู ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ
- [ ] API ูุฅูุดุงุก ููุฏ ุงูุงูุชุชุงุญ
- [ ] API ููุชุญูู ูู ุชูุงุฒู ุงูุฃุฑุตุฏุฉ

#### ุงูุฌุฏุงูู ุงููุทููุจุฉ:
```sql
core_opening_balances (
    id UUID PRIMARY KEY,
    business_id UUID NOT NULL,
    fiscal_year INT NOT NULL,
    account_id UUID REFERENCES core_accounts(id),
    debit_balance DECIMAL(15,2) DEFAULT 0,
    credit_balance DECIMAL(15,2) DEFAULT 0,
    is_posted BOOLEAN DEFAULT false,
    journal_entry_id UUID,
    created_by UUID,
    created_at TIMESTAMP DEFAULT NOW()
)
```

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ุฅุฏุฎุงู ุงูุฃุฑุตุฏุฉ ุงูุงูุชุชุงุญูุฉ
- [ ] ุดุงุดุฉ ูุฑุงุฌุนุฉ ุงูุฃุฑุตุฏุฉ
- [ ] ุดุงุดุฉ ุชุฑุญูู ุงูุฃุฑุตุฏุฉ

---

### 5.2 ุชุฑุญูู ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ

#### Backend (NestJS)
- [ ] ุฅูุดุงุก ูุญุฏุฉ data-migration
- [ ] ุฌุฏูู core_migration_projects
- [ ] ุฌุฏูู core_imported_historical_data
- [ ] API ูุฑูุน ููู Excel
- [ ] API ููุนุงููุฉ ุงูุจูุงูุงุช
- [ ] API ูุชูููุฐ ุงูุชุฑุญูู
- [ ] API ููุชุญูู ูุงููุทุงุจูุฉ

#### ุงูุฌุฏุงูู ุงููุทููุจุฉ:
```sql
core_migration_projects (
    id UUID PRIMARY KEY,
    business_id UUID NOT NULL,
    name VARCHAR(200) NOT NULL,
    description TEXT,
    source_file_url TEXT,
    status VARCHAR(20) DEFAULT 'draft', -- 'draft', 'validated', 'in_progress', 'completed', 'failed'
    total_records INT DEFAULT 0,
    processed_records INT DEFAULT 0,
    failed_records INT DEFAULT 0,
    started_at TIMESTAMP,
    completed_at TIMESTAMP,
    created_by UUID,
    created_at TIMESTAMP DEFAULT NOW()
)

core_imported_historical_data (
    id UUID PRIMARY KEY,
    business_id UUID NOT NULL,
    migration_project_id UUID REFERENCES core_migration_projects(id),
    import_batch_id UUID NOT NULL,
    import_date TIMESTAMP DEFAULT NOW(),
    original_date DATE NOT NULL,
    clearing_account_id UUID,
    debit_amount DECIMAL(15,2) DEFAULT 0,
    credit_amount DECIMAL(15,2) DEFAULT 0,
    reference VARCHAR(100),
    description TEXT,
    is_reconciled BOOLEAN DEFAULT false,
    reconciliation_id UUID,
    created_at TIMESTAMP DEFAULT NOW()
)
```

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ุฅุฏุงุฑุฉ ูุดุงุฑูุน ุงูุชุฑุญูู
- [ ] ุดุงุดุฉ ุฑูุน ููู ุงูุจูุงูุงุช
- [ ] ุดุงุดุฉ ูุนุงููุฉ ุงูุจูุงูุงุช
- [ ] ุดุงุดุฉ ุชูููุฐ ุงูุชุฑุญูู
- [ ] ุดุงุดุฉ ุชูุฑูุฑ ูุชุงุฆุฌ ุงูุชุฑุญูู

---

## ุงููุฑุญูุฉ 6: ูุชุงููุฌ ุงูุฎุฏูุงุช ูุงูุชุณุนูุฑ (ุงูุฃุณุจูุน 11)

### 6.1 ูุชุงููุฌ ุงูุฎุฏูุงุช

#### Backend (NestJS)
- [ ] ุฅูุดุงุก ูุญุฏุฉ service-catalog
- [ ] ุฌุฏูู core_service_catalog
- [ ] ุฌุฏูู core_station_service_pricing
- [ ] API ูุฅุฏุงุฑุฉ ุงูุฎุฏูุงุช
- [ ] API ููุชุณุนูุฑ ุญุณุจ ุงููุญุทุฉ

#### ุงูุฌุฏุงูู ุงููุทููุจุฉ:
```sql
core_service_catalog (
    id UUID PRIMARY KEY,
    business_id UUID,
    service_code VARCHAR(30) UNIQUE NOT NULL,
    service_name VARCHAR(100) NOT NULL,
    service_name_ar VARCHAR(100),
    description TEXT,
    category VARCHAR(50) NOT NULL, -- 'installation', 'maintenance', 'migration', 'survey', 'other'
    default_cost DECIMAL(12,2) NOT NULL,
    cost_type VARCHAR(20) DEFAULT 'fixed', -- 'fixed', 'per_unit', 'per_hour', 'per_meter'
    unit_of_measure VARCHAR(20),
    technician_fee DECIMAL(12,2) DEFAULT 0,
    fee_type VARCHAR(20) DEFAULT 'fixed',
    fee_percentage DECIMAL(5,2),
    is_active BOOLEAN DEFAULT true,
    is_billable_to_customer BOOLEAN DEFAULT true,
    revenue_account_id UUID,
    expense_account_id UUID,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
)

core_station_service_pricing (
    id UUID PRIMARY KEY,
    station_id UUID REFERENCES core_stations(id),
    service_id UUID REFERENCES core_service_catalog(id),
    custom_cost DECIMAL(12,2),
    custom_technician_fee DECIMAL(12,2),
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(station_id, service_id)
)
```

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ูุงุฆูุฉ ุงูุฎุฏูุงุช
- [ ] ุดุงุดุฉ ุฅุถุงูุฉ/ุชุนุฏูู ุฎุฏูุฉ
- [ ] ุดุงุดุฉ ุชุณุนูุฑ ุงูุฎุฏูุงุช ุญุณุจ ุงููุญุทุฉ

---

## ุงููุฑุญูุฉ 7: ุฅุฏุงุฑุฉ ุตูุฏูู ุงูุชุญุตูู (ุงูุฃุณุจูุน 12)

### 7.1 ุตูุฏูู ุงูุชุญุตูู

#### Backend (NestJS)
- [ ] ุฅูุดุงุก ูุญุฏุฉ collection-box
- [ ] ุฌุฏูู core_collectors
- [ ] ุฌุฏูู core_collector_submissions
- [ ] ุฌุฏูู core_cash_deposits
- [ ] API ูุฅุฏุงุฑุฉ ุงููุชุญุตููู
- [ ] API ูุชุณููู ุงูุชุญุตูู
- [ ] API ูุชูุฑูุฏ ุงูุตูุฏูู ููุจูู

#### ุงูุฌุฏุงูู ุงููุทููุจุฉ:
```sql
core_collectors (
    id UUID PRIMARY KEY,
    business_id UUID NOT NULL,
    user_id UUID REFERENCES core_users(id),
    collector_code VARCHAR(20) UNIQUE,
    name VARCHAR(200) NOT NULL,
    phone VARCHAR(20),
    is_active BOOLEAN DEFAULT true,
    assigned_area TEXT,
    created_at TIMESTAMP DEFAULT NOW()
)

core_collector_submissions (
    id UUID PRIMARY KEY,
    business_id UUID NOT NULL,
    collector_id UUID REFERENCES core_collectors(id),
    submission_date DATE NOT NULL,
    submission_number VARCHAR(20) UNIQUE,
    total_amount DECIMAL(15,2) NOT NULL,
    invoices_count INT DEFAULT 0,
    received_by UUID,
    received_at TIMESTAMP,
    status VARCHAR(20) DEFAULT 'pending', -- 'pending', 'received', 'deposited'
    journal_entry_id UUID,
    notes TEXT,
    created_at TIMESTAMP DEFAULT NOW()
)

core_cash_deposits (
    id UUID PRIMARY KEY,
    business_id UUID NOT NULL,
    deposit_date DATE NOT NULL,
    bank_account_id UUID NOT NULL,
    amount DECIMAL(15,2) NOT NULL,
    deposit_slip_number VARCHAR(50),
    deposited_by UUID,
    confirmed BOOLEAN DEFAULT false,
    confirmed_by UUID,
    confirmed_at TIMESTAMP,
    journal_entry_id UUID,
    notes TEXT,
    created_at TIMESTAMP DEFAULT NOW()
)
```

#### Frontend (Angular)
- [ ] ุดุงุดุฉ ุฅุฏุงุฑุฉ ุงููุชุญุตููู
- [ ] ุดุงุดุฉ ุชุณููู ุงูุชุญุตูู ุงููููู
- [ ] ุดุงุดุฉ ุชูุฑูุฏ ุงูุตูุฏูู ููุจูู
- [ ] ุชูุฑูุฑ ุญุฑูุฉ ุตูุฏูู ุงูุชุญุตูู

---

## ุงููุฑุญูุฉ 8: ุงูุชูุงูู ูุงูุงุฎุชุจุงุฑ (ุงูุฃุณุจูุน 13-14)

### 8.1 ุงูุชูุงูู ูุน ูุธุงู ุงููุทูุฑ

#### Backend (NestJS)
- [ ] ุชุณุฌูู APIs ูู ูุธุงู ุงููุทูุฑ
- [ ] ูุดุฑ ุงูุฃุญุฏุงุซ (Events) ููุฃูุธูุฉ ุงูุฃุฎุฑู
- [ ] ุงุณุชูุจุงู ุงูุฃุญุฏุงุซ ูู ุงูุฃูุธูุฉ ุงูุฃุฎุฑู
- [ ] ุฅุฑุณุงู ููุงููุณ ุงูุฃุฏุงุก

### 8.2 ุงูุงุฎุชุจุงุฑุงุช

- [ ] Unit Tests ูุฌููุน Services
- [ ] Integration Tests ููู APIs
- [ ] E2E Tests ููุดุงุดุงุช ุงูุฑุฆูุณูุฉ

### 8.3 ุงูุชูุซูู

- [ ] ุชุญุฏูุซ Swagger Documentation
- [ ] ูุชุงุจุฉ ุฏููู ุงููุณุชุฎุฏู
- [ ] ูุชุงุจุฉ ุฏููู ุงููุทูุฑ

---

## ๐ ููุฎุต ุงููุฑุงุญู

| ุงููุฑุญูุฉ | ุงููุตู | ุงููุฏุฉ | ุงูุฃููููุฉ |
|---------|-------|-------|----------|
| 1 | ุงุณุชููุงู ุงูุฃุณุงุณูุงุช | ุฃุณุจูุนุงู | ุนุงููุฉ |
| 2 | ุงููุธุงู ุงููุงูู ุงููุชูุฏู | ุฃุณุจูุนุงู | ุนุงููุฉ |
| 3 | ูุฑูุฒ ุงูุชุณููุฉ ุงููุฑู | ุฃุณุจูุนุงู | ุนุงููุฉ |
| 4 | ูุธุงู ุฃูุงูุฑ ุงูุฏูุน ูุงูุนูุฏ | ุฃุณุจูุนุงู | ุนุงููุฉ |
| 5 | ุงููููุฏ ุงูุงูุชุชุงุญูุฉ ูุงูุชุฑุญูู | ุฃุณุจูุนุงู | ูุชูุณุทุฉ |
| 6 | ูุชุงููุฌ ุงูุฎุฏูุงุช | ุฃุณุจูุน | ูุชูุณุทุฉ |
| 7 | ุฅุฏุงุฑุฉ ุตูุฏูู ุงูุชุญุตูู | ุฃุณุจูุน | ูุชูุณุทุฉ |
| 8 | ุงูุชูุงูู ูุงูุงุฎุชุจุงุฑ | ุฃุณุจูุนุงู | ุนุงููุฉ |

**ุงููุฏุฉ ุงูุฅุฌูุงููุฉ ุงููุชููุนุฉ:** 14 ุฃุณุจูุน (3.5 ุดูุฑ)

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงููุงุนุฏุฉ ุงูุฐูุจูุฉ:** ูุง ุดุงุดุฉ ุจุฏูู Backend ูุชุตู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **ูุง ุจูุงูุงุช ููููุฉ:** ุฌููุน ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. **ุงูุงูุชุฒุงู ุจุงูููุงุนุฏ ุงูุตุงุฑูุฉ:** TypeScript, NestJS, Angular, Prisma, PostgreSQL
4. **ุจุงุฏุฆุฉ ุงูุฌุฏุงูู:** `core_` ูุฌููุน ุฌุฏุงูู ุงููุธุงู ุงูุฃู
5. **UUID:** ูุฌููุน ุงูููุงุชูุญ ุงูุฃุณุงุณูุฉ
6. **Audit Trail:** ุชุณุฌูู ุฌููุน ุงูุนูููุงุช ุงูุญุณุงุณุฉ
7. **Soft Delete:** ููุณุฌูุงุช ุงููุงููุฉ

---

## ๐ฏ ุงูุฎุทูุฉ ุงูุชุงููุฉ

ุงุจุฏุฃ ุจู **ุงููุฑุญูุฉ 1.2: ุงุณุชููุงู ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช (RBAC)** ุญูุซ ุฃููุง ุงูุฃุณุงุณ ูุฌููุน ุงููุญุฏุงุช ุงูุฃุฎุฑู.
